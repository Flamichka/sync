<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HarmonyCast | Host Control</title>
    <link rel="stylesheet" href="/assets/styles.css" />
</head>
<body class="page page--host">
    <section class="host-panel">
        <h1>Host Control</h1>
        <p id="host-video-title">No video loaded</p>

        <div class="control-grid">
            <div class="video-input">
                <input id="video-url" type="text" placeholder="Paste YouTube URL or ID" />
                <button id="load-video">Load Video</button>
            </div>

            <div class="timeline">
                <span id="host-elapsed">0:00</span>
                <input type="range" id="seek-slider" min="0" max="1000" value="0" />
                <span id="host-duration">0:00</span>
            </div>

            <div class="action-row" style="display:flex; gap:1rem; flex-wrap:wrap;">
                <button id="play-btn">Play</button>
                <button id="pause-btn">Pause</button>
                <button id="resync-btn">Force Resync</button>
            </div>

            <div class="host-volume">
                <label for="host-volume-slider">Host Volume</label>
                <input type="range" id="host-volume-slider" min="0" max="100" value="70" />
            </div>

            <div class="status-board">
                <div class="stat">
                    <div class="label">Playback</div>
                    <div class="value" id="playback-status">Idle</div>
                </div>
                <div class="stat">
                    <div class="label">Video ID</div>
                    <div class="value" id="video-id">â€”</div>
                </div>
                <div class="stat">
                    <div class="label">Host Latency</div>
                    <div class="value" id="host-latency">0 ms</div>
                </div>
                <div class="stat">
                    <div class="label">WebSocket</div>
                    <div class="value" id="ws-status">Disconnected</div>
                </div>
            </div>
        </div>
    </section>

    <section class="listener-table">
        <table>
            <thead>
                <tr>
                    <th>Listener ID</th>
                    <th>IP</th>
                    <th>Status</th>
                    <th>Player Time</th>
                    <th>Volume</th>
                    <th>Latency</th>
                    <th>Buffer</th>
                    <th>Quality</th>
                    <th>Last Report</th>
                </tr>
            </thead>
            <tbody id="listener-body">
                <tr>
                    <td colspan="9">No listeners connected yet.</td>
                </tr>
            </tbody>
        </table>
    </section>

    <div id="host-player"></div>
    <div class="error-toast" id="error-toast"></div>

    <script>
        window.APP_CONFIG = {
            wsEndpoint: ((location.protocol === 'https:' ? 'wss://' : 'ws://') + location.host + '/ws/host'),
            metadataEndpoint: location.origin + '/api/video/metadata'
        };
    </script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="/assets/host.js"></script>
</body>
</html>


